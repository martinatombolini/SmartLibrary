= render 'books/navbar' 

.container
  .row
    .col
      = image_tag 'black_book.png',style:"width:100%"
    .col-8
      %br
      %br
      .card{:align => "center", :style => "width: 100%"}
        %br
        %h1 Details
        %hr
        

        %p
          %strong Title:
          = @book.title
        %p
          %strong Author:
          = @book.author

        %p
          %strong Notes:
          = @book.notes

        %p
          %strong ISBN:
          = @book.isbn

        %p
          %strong Status:
          = "available/borrowed"

        %p
          %strong Location:
          =User.find(@book.owner).address
          

        .container 
          .row 
            
            .col
              - if can? :edit, Book
                -if @book.owner==current_user.id 
                  = button_to 'Edit', edit_book_path(@book), :method => :get, class: "btn btn-primary"
              %br
              .col
              - if can? :delete, Book
                -if @book.owner==current_user.id 
                  = button_to 'Delete book', book_path(@book), :method => :delete, data: { confirm: 'Are you sure?' },  class: "btn btn-primary"
          %br
          .row 
            
            - if current_user.is_reader?
              -if @reservation.length!=0
                -@reservation.each do |reservation|
                  -if reservation.book_id==@book.id and reservation.user_id==current_user.id
                    = button_to 'Cancel reservation', reservation, method: :delete, class: 'btn btn-danger'
                  -else
                    = button_to 'Ask for reservation', new_book_reservations_path(@book), class: "btn btn-primary", :method => :get
              -else
                = button_to 'Ask for reservation', new_book_reservations_path(@book), class: "btn btn-primary", :method => :get
        
        %br


= link_to 'Back', books_path